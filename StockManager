package srcc;

import srcc.Produit;

import java.io.*;
import java.nio.charset.StandardCharsets;
import java.util.ArrayList;
import java.util.List;

public class StockManager {

    public static List<Produit> importStock(String path) {
        List<Produit> produits = new ArrayList<>();
        try (BufferedReader br = new BufferedReader(
                new InputStreamReader(new FileInputStream(path), StandardCharsets.UTF_8))) {
            String line;
            boolean header = true;
            while ((line = br.readLine()) != null) {
                if (header) { header = false; continue; }
                String[] t = line.split(";");
                Produit p = new Produit(t[0], t[1], Double.parseDouble(t[2]), Integer.parseInt(t[3]));
                produits.add(p);
            }
        } catch (IOException e) {
            System.err.println("Erreur lecture CSV : " + e.getMessage());
        }
        return produits;
    }

    public static void printStockInfo(List<Produit> produits) {
        double total = 0;
        for (Produit p : produits) {
            total += p.getPrix() * p.getQte();
        }
        System.out.println("Nombre de produits : " + produits.size());
        System.out.println("Valorisation totale : " + total + " â‚¬");
    }
}
